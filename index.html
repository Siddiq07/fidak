<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Art Fest ‚Ä¢ Matrix</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

<style>
:root{
  --gold:#f4c430;
  --dark:#0f0f12;
  --card:#1a1b20;
  --muted:#9ca3af;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#000;
  color:#fff;
}

/* HERO */
.hero{
  min-height:100vh;
  background:
    linear-gradient(to bottom, rgba(0,0,0,.65), rgba(0,0,0,.9)),
    url('https://images.unsplash.com/photo-1524178232363-1fb2b075b655?auto=format&fit=crop&w=1600&q=80');
  background-size:cover;
  background-position:center;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
}

.hero-box{
  max-width:420px;
  width:100%;
  text-align:center;
}

.brand{
  font-size:42px;
  font-weight:800;
  letter-spacing:.5px;
}

.brand span{color:var(--gold)}

.tagline{
  color:var(--gold);
  letter-spacing:3px;
  font-size:14px;
  margin-bottom:12px;
}

.subtitle{
  color:#e5e7eb;
  font-size:14px;
  margin-bottom:22px;
}

/* BUTTONS */
.btn-gold{
  background:var(--gold);
  color:#000;
  border:none;
  font-weight:700;
  border-radius:999px;
  padding:14px;
}
.btn-outline{
  border:1px solid rgba(255,255,255,.4);
  color:#fff;
  border-radius:999px;
  padding:14px;
}

/* STATS */
.stats{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
  margin-top:24px;
}
.stat{
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(6px);
  border-radius:16px;
  padding:18px 12px;
}
.stat h2{
  margin:0;
  font-size:36px;
  color:var(--gold);
  font-weight:900;
}
.stat span{
  font-size:12px;
  color:#e5e7eb;
  letter-spacing:1px;
}

/* SCOREBOARD */
.scoreboard{
  background:var(--dark);
  padding:30px 16px;
}
.score-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
  max-width:1000px;
  margin:auto;
}
.team-card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  text-align:center;
  animation:fadeUp .5s ease;
}
.team-name{
  font-weight:700;
  margin-bottom:6px;
}
.team-score{
  font-size:36px;
  font-weight:900;
  color:var(--gold);
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(12px)}
  to{opacity:1;transform:none}
}

/* MODAL */
.modal-content{
  background:#111;
  color:#fff;
  border-radius:16px;
}
.form-control, .form-select{
  background:#1f1f25;
  border:none;
  color:#fff;
}
.form-control::placeholder{color:#9ca3af}

/* FOOTER */
footer{
  background:#000;
  color:#9ca3af;
  font-size:12px;
  text-align:center;
  padding:14px;
}
</style>
</head>

<body>

<!-- HERO -->
<section class="hero">
  <div class="hero-box">
    <div class="tagline">RECTIFYING THE VIRTUOUS</div>
    <div class="brand">Art <span>Fest</span></div>
    <div class="subtitle">Matrix Edition ‚Ä¢ 2025</div>

    <button class="btn btn-gold w-100 mb-3" data-bs-toggle="modal" data-bs-target="#loginModal">
      GO TO MATRIX
    </button>
    <button class="btn btn-outline w-100 mb-4">
      GO TO OFFICIAL SITE
    </button>

    <div class="stats">
      <div class="stat">
        <h2 id="statStudents">0</h2>
        <span>STUDENTS</span>
      </div>
      <div class="stat">
        <h2 id="statPrograms">0</h2>
        <span>PROGRAMS</span>
      </div>
      <div class="stat">
        <h2 id="statTeams">0</h2>
        <span>TEAMS</span>
      </div>
      <div class="stat">
        <h2 id="statStages">0</h2>
        <span>STAGES</span>
      </div>
    </div>
  </div>
</section>

<!-- LIVE SCORE -->
<section class="scoreboard">
  <h4 class="text-center mb-4">üèÜ Live Team Scores</h4>
  <div id="scoreGrid" class="score-grid"></div>
</section>

<footer>
  ¬© <span id="year"></span> Art Fest Matrix
</footer>

<!-- LOGIN MODAL -->
<div class="modal fade" id="loginModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-3">
      <h5 class="mb-3 text-center">Login</h5>

      <select id="role" class="form-select mb-3">
        <option value="">Select Role</option>
        <option value="admin">Admin</option>
        <option value="leader">Team Leader</option>
        <option value="participant">Participant</option>
      </select>

      <div id="leaderFields" class="d-none">
        <input id="leaderChess" class="form-control mb-2" placeholder="Leader Chess #">
        <input id="leaderPass" type="password" class="form-control mb-2" placeholder="Team Password">
      </div>

      <div id="participantFields" class="d-none">
        <input id="participantChess" class="form-control mb-2" placeholder="Chess Number">
      </div>

      <button id="loginBtn" class="btn btn-gold w-100">ENTER</button>
    </div>
  </div>
</div>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBMDGNukeonNa_-PWB-5cTO4GMofd3vyiM",
  authDomain: "gen7-3e139.firebaseapp.com",
  databaseURL: "https://gen7-3e139-default-rtdb.firebaseio.com",
  projectId: "gen7-3e139",
  storageBucket: "gen7-3e139.firebasestorage.app",
  messagingSenderId: "578412378966",
  appId: "1:578412378966:web:f76c1e69a01a4bbfbd74f7"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const scoreGrid = document.getElementById('scoreGrid');

/* LIVE SCORE */
onValue(ref(db,'teams'), snap=>{
  const teams = snap.val()||{};
  scoreGrid.innerHTML='';
  Object.values(teams)
    .sort((a,b)=>(b.score||0)-(a.score||0))
    .forEach(t=>{
      const div=document.createElement('div');
      div.className='team-card';
      div.innerHTML=`
        <div class="team-name">${t.name||''}</div>
        <div class="team-score">${t.score||0}</div>
      `;
      scoreGrid.appendChild(div);
    });

  document.getElementById('statTeams').textContent = Object.keys(teams).length;
});

/* STATS */
onValue(ref(db,'students'), s=>{
  document.getElementById('statStudents').textContent = Object.keys(s.val()||{}).length;
});
onValue(ref(db,'events'), e=>{
  document.getElementById('statPrograms').textContent = Object.keys(e.val()||{}).length;
});

/* LOGIN LOGIC */
const role=document.getElementById('role');
role.onchange=()=>{
  leaderFields.classList.toggle('d-none', role.value!=='leader');
  participantFields.classList.toggle('d-none', role.value!=='participant');
};

loginBtn.onclick=()=>{
  if(role.value==='admin') location.href='admin.html';
  if(role.value==='leader'){
    location.href=`leader.html?leader=${leaderChess.value}`;
  }
  if(role.value==='participant'){
    location.href=`participant.html?chess=${participantChess.value}`;
  }
};

document.getElementById('year').textContent=new Date().getFullYear();
</script>

</body>
</html>